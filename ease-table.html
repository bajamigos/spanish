<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pelagos.club - Tabla de Factores de Facilidad</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* Existing styles remain */
    /* New tooltip styles */
    .ease-table td {
      position: relative;  /* For absolute positioning of tooltip */
      cursor: pointer;     /* Indicate hoverable */
    }
    .ease-table td:hover::after,
    .ease-table td:focus::after {
      content: attr(data-cp);  /* Display CP from data attribute */
      position: absolute;
      top: -40px;              /* Position above cell; adjust as needed */
      left: 50%;
      transform: translateX(-50%);
      background-color: #333;
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 0.8rem;
      white-space: nowrap;
      z-index: 10;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .ease-table td:hover::before,
    .ease-table td:focus::before {
      content: '';
      position: absolute;
      top: -10px;              /* Arrow below tooltip */
      left: 50%;
      transform: translateX(-50%);
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-top: 5px solid #333;
      z-index: 10;
    }
    /* For empty cells, disable hover */
    .ease-table td.empty:hover::after,
    .ease-table td.empty:hover::before { display: none; }
  </style>
</head>
<body>
  <!-- Existing HTML structure remains unchanged -->

  <script>
    // ... Existing code up to displayEaseTable() ...

    // Updated table display function
    function displayEaseTable() {
      const container = document.getElementById('ease-table-container');
      container.innerHTML = '';

      const table = document.createElement('table');
      table.className = 'ease-table';

      const headerRow = table.insertRow();
      for (let col = 1; col <= 10; col++) {
        const th = document.createElement('th');
        th.textContent = `Col ${col}`;
        headerRow.appendChild(th);
      }

      for (let row = 0; row < 10; row++) {
        const tr = table.insertRow();
        for (let col = 0; col < 10; col++) {
          const index = row * 10 + col;
          const td = tr.insertCell();
          if (index < cards.length) {
            const card = cards[index];
            const review = cardReviewDocs[card.id] || { ef: null };
            let ef = review.ef;
            let cp = calculateConfidence(ef);
            td.textContent = card.word;  // Only show the word
            td.setAttribute('data-cp', `Confianza: ${cp}%`);  // Store CP for tooltip
            td.setAttribute('aria-label', `${card.word}: Confianza ${cp}%`);  // For accessibility
          } else {
            td.textContent = 'N/A';
            td.className = 'empty';
          }
        }
      }

      container.appendChild(table);
    }

    // ... Rest of the script remains unchanged ...
  </script>
</body>
</html>
